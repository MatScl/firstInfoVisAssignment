Spiegazione Dettagliata del Codice üìö
Ti spiego ogni singola parte del codice, linea per linea!

üèóÔ∏è STRUTTURA GENERALE
javascript
import React, { useEffect, useRef, useState } from 'react';
import * as d3 from 'd3';
Import delle librerie:
    ‚Ä¢ React, { useEffect, useRef, useState }: Hooks di React 
        ‚ó¶ useState: gestisce lo stato dei dati 
        ‚ó¶ useRef: riferimento all'elemento SVG nel DOM 
        ‚ó¶ useEffect: esegue codice quando il componente viene montato 
    ‚Ä¢ d3: libreria D3.js per visualizzazione e manipolazione SVG 

üìä PARTE 1: GENERAZIONE DEL DATASET
javascript
const MultivariateVisualization = () => {
  const svgRef = useRef(null);
  const [data] = useState(() => {
    return Array.from({ length: 10 }, (_, i) => ({
      id: i,
      name: `Case_${i + 1}`,
      var1: Math.random() * 80 + 10,
      var2: Math.random() * 80 + 10,
      var3: Math.random() * 80 + 10,
      var4: Math.random() * 80 + 10,
      var5: Math.random() * 80 + 10,
      var6: Math.random() * 80 + 10,
      clickState: 0
    }));
  });
Cosa succede qui:
    1. const svgRef = useRef(null) 
        ‚ó¶ Crea un "puntatore" all'elemento <svg> nel DOM 
        ‚ó¶ Servir√† per passare l'SVG a D3.js 
    2. const [data] = useState(() => { ... }) 
        ‚ó¶ Crea lo stato che contiene i dati 
        ‚ó¶ Usa una funzione inizializzatrice (viene eseguita UNA SOLA VOLTA) 
        ‚ó¶ NON mette setData perch√© i dati non cambiano mai 
    3. Array.from({ length: 10 }, (_, i) => ...) 
        ‚ó¶ Crea un array di 10 elementi 
        ‚ó¶ _ ignora il valore (undefined), i √® l'indice (0-9) 
    4. Ogni oggetto contiene: 
        ‚ó¶ id: i ‚Üí identificatore univoco (0-9) 
        ‚ó¶ name: "Case_1" ‚Üí etichetta leggibile 
        ‚ó¶ var1-6: valori random tra 10 e 90 
            ‚ñ™ Math.random() ‚Üí numero tra 0 e 1 
            ‚ñ™ * 80 ‚Üí scala a 0-80 
            ‚ñ™ + 10 ‚Üí sposta a 10-90 
        ‚ó¶ clickState: 0 ‚Üí stato iniziale (quale coppia di variabili √® attiva) 
Esempio di un data-case:
javascript
{
  id: 3,
  name: "Case_4",
  var1: 45.2,
  var2: 67.8,
  var3: 23.1,
  var4: 89.5,
  var5: 34.7,
  var6: 56.3,
  clickState: 0
}

üé® PARTE 2: SETUP INIZIALE (useEffect)
javascript
useEffect(() => {
  const width = 800;
  const height = 600;
  const margin = { top: 40, right: 40, bottom: 40, left: 40 };
  const innerWidth = width - margin.left - margin.right;
  const innerHeight = height - margin.top - margin.bottom;
```

### **Dimensioni e margini:**
- `width, height`: dimensioni totali dell'SVG (800x600px)
- `margin`: spazio per assi e labels (40px da ogni lato)
- `innerWidth, innerHeight`: spazio utilizzabile per i dati
  - `innerWidth = 800 - 40 - 40 = 720px`
  - `innerHeight = 600 - 40 - 40 = 520px`

**Visualizzazione:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     margin.top (40px)       ‚îÇ
‚îú‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ40‚îÇ                     ‚îÇ 40 ‚îÇ
‚îÇpx‚îÇ   AREA DISEGNO      ‚îÇ px ‚îÇ
‚îÇ  ‚îÇ   (innerWidth x     ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ    innerHeight)     ‚îÇ    ‚îÇ
‚îú‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ    margin.bottom (40px)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

üìè PARTE 3: CREAZIONE DELLE SCALE D3
javascript
const allVars = data.flatMap(d => [d.var1, d.var2, d.var3, d.var4, d.var5, d.var6]);
const minVal = d3.min(allVars);
const maxVal = d3.max(allVars);
Calcolo dominio dinamico:
    1. data.flatMap(d => [...]) 
        ‚ó¶ Per ogni data-case, prende tutte e 6 le variabili 
        ‚ó¶ flatMap "appiattisce" il risultato in un unico array 
       Esempio: 
javascript
   // Prima (array di array):
   [[45, 67, 23, 89, 34, 56], [78, 12, 90, 45, 67, 23], ...]
   
   // Dopo flatMap (array singolo):
   [45, 67, 23, 89, 34, 56, 78, 12, 90, 45, 67, 23, ...]
    2. d3.min(allVars) e d3.max(allVars) 
        ‚ó¶ Trova il valore minimo e massimo tra TUTTE le variabili 
        ‚ó¶ Questo garantisce che le scale funzionino per qualsiasi range di dati 

javascript
const xScale = d3.scaleLinear()
  .domain([minVal, maxVal])
  .range([0, innerWidth]);

const yScale = d3.scaleLinear()
  .domain([minVal, maxVal])
  .range([innerHeight, 0]);
```

### **Le Scale D3:**

Una **scala** √® una funzione che mappa un intervallo di INPUT su un intervallo di OUTPUT.

**xScale:**
- **Input (domain)**: `[minVal, maxVal]` ‚Üí es. `[10, 90]`
- **Output (range)**: `[0, 720]` ‚Üí coordinate X sullo schermo
- **Uso**: `xScale(45)` ‚Üí ritorna circa `315` (met√† dello schermo)

**yScale:**
- **Input (domain)**: `[minVal, maxVal]` ‚Üí es. `[10, 90]`
- **Output (range)**: `[520, 0]` ‚Üí **INVERTITO!**
- **Perch√© invertito?** In SVG, y=0 √® in ALTO, y=520 √® in BASSO
  - Vogliamo che valori GRANDI siano in ALTO (come un grafico normale)
  - Quindi invertiamo il range

**Grafico esplicativo:**
```
Dominio dati:        10 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 50 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 90
                      ‚Üì          ‚Üì          ‚Üì
xScale (normale):     0 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 360 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 720

Dominio dati:        10 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 50 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 90
                      ‚Üì          ‚Üì          ‚Üì
yScale (invertito): 520 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 260 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 0
                   (BASSO)    (CENTRO)   (ALTO)

üñºÔ∏è PARTE 4: CREAZIONE SVG E STRUTTURA
javascript
const svg = d3.select(svgRef.current);
svg.selectAll("*").remove();

svg.attr("width", width)
   .attr("height", height);

const g = svg.append("g")
  .attr("transform", `translate(${margin.left},${margin.top})`);
Setup SVG:
    1. d3.select(svgRef.current) 
        ‚ó¶ Seleziona l'elemento SVG tramite il ref di React 
        ‚ó¶ Restituisce un oggetto D3 che possiamo manipolare 
    2. svg.selectAll("*").remove() 
        ‚ó¶ Rimuove TUTTI gli elementi figli dell'SVG 
        ‚ó¶ Importante per evitare duplicazioni quando il componente si ri-renderizza 
    3. svg.attr("width", width).attr("height", height) 
        ‚ó¶ Imposta le dimensioni dell'SVG 
    4. const g = svg.append("g") 
        ‚ó¶ Crea un gruppo <g> dentro l'SVG 
        ‚ó¶ √à il contenitore principale per tutti i disegni 
    5. .attr("transform", "translate(40, 40)") 
        ‚ó¶ Sposta il gruppo di 40px a destra e 40px in basso 
        ‚ó¶ Questo crea automaticamente i margini! 
Struttura risultante:
xml
<svg width="800" height="600">
  <g transform="translate(40, 40)">
    <!-- Tutto il contenuto va qui -->
  </g>
</svg>

üìù PARTE 5: TITOLI E TESTI
javascript
svg.append("text")
  .attr("x", width / 2)
  .attr("y", 25)
  .attr("text-anchor", "middle")
  .style("font-size", "18px")
  .style("font-weight", "bold")
  .text("Visualizzazione Multivariata Interattiva");
Spiegazione:
    ‚Ä¢ append("text"): crea un elemento <text> SVG 
    ‚Ä¢ attr("x", 400): posiziona al centro orizzontale (800/2) 
    ‚Ä¢ attr("y", 25): posiziona a 25px dall'alto 
    ‚Ä¢ attr("text-anchor", "middle"): centra il testo rispetto a x 
    ‚Ä¢ .text(...): imposta il contenuto testuale 

üë§ PARTE 6: FUNZIONE PER CREARE GLI OMINI
javascript
const createStickman = (g, scale = 1) => {
  const size = 20 * scale;
  
  // Testa
  g.append("circle")
    .attr("cx", 0)
    .attr("cy", -size * 1.2)
    .attr("r", size * 0.3)
    .attr("class", "stickman-head");
```

### **Parametri:**
- `g`: gruppo SVG dove disegnare l'omino
- `scale`: fattore di scala (default 1)

### **Testa (cerchio):**
- `cx, cy`: coordinate del centro
  - `cx = 0`: centrato orizzontalmente
  - `cy = -24`: SOPRA l'origine (coordinate negative = verso l'alto)
- `r = 6`: raggio del cerchio
- `class = "stickman-head"`: per applicare stili dopo

**Coordinate relative:**
```
        cy=-24 ‚óè  <- Testa (r=6)
               |
               |  <- Corpo
        cy=0 ‚îÄ‚îÄ‚îº‚îÄ‚îÄ  <- Origine (punto di riferimento)
              / \  <- Gambe
        cy=14

javascript
// Corpo
g.append("line")
  .attr("x1", 0)
  .attr("y1", -size * 0.9)
  .attr("x2", 0)
  .attr("y2", size * 0.2)
  .attr("class", "stickman-body");
Corpo (linea verticale):
    ‚Ä¢ x1, y1: punto di partenza (0, -18) 
    ‚Ä¢ x2, y2: punto di arrivo (0, 4) 
    ‚Ä¢ Disegna una linea verticale dal collo alla vita 

javascript
// Braccia
g.append("line")
  .attr("x1", -size * 0.4)
  .attr("y1", -size * 0.3)
  .attr("x2", size * 0.4)
  .attr("y2", -size * 0.3)
  .attr("class", "stickman-arms");
Braccia (linea orizzontale):
    ‚Ä¢ Da (-8, -6) a (8, -6) 
    ‚Ä¢ Linea orizzontale che attraversa il corpo all'altezza delle spalle 

javascript
// Gambe (2 linee diagonali)
g.append("line")
  .attr("x1", 0)
  .attr("y1", size * 0.2)
  .attr("x2", -size * 0.3)
  .attr("y2", size * 0.7)
  .attr("class", "stickman-leg");

g.append("line")
  .attr("x1", 0)
  .attr("y1", size * 0.2)
  .attr("x2", size * 0.3)
  .attr("y2", size * 0.7)
  .attr("class", "stickman-leg");
```

### **Gambe:**
- Partono dalla vita `(0, 4)`
- Gamba sinistra va a `(-6, 14)`
- Gamba destra va a `(6, 14)`

**Risultato finale:**
```
     ‚óè        <- Testa
     |        <- Corpo
   ‚îÄ‚îÄ‚îº‚îÄ‚îÄ      <- Braccia
     |
    / \       <- Gambe

üé≠ PARTE 7: CREAZIONE DEI GRUPPI PER GLI OMINI
javascript
const stickmen = g.selectAll(".stickman-group")
  .data(data)
  .enter()
  .append("g")
  .attr("class", "stickman-group")
  .attr("transform", d => `translate(${xScale(d.var1)},${yScale(d.var2)})`)
  .style("cursor", "pointer");
Pattern Data Join di D3:
Questa √® la parte pi√π importante di D3! Vediamola step-by-step:
1. g.selectAll(".stickman-group")
    ‚Ä¢ Seleziona TUTTI gli elementi con classe stickman-group 
    ‚Ä¢ All'inizio NON esistono ‚Üí selezione VUOTA 
    ‚Ä¢ √à intenzionale! D3 usa questo per capire cosa deve creare 
2. .data(data)
    ‚Ä¢ Associa i dati (array di 10 oggetti) alla selezione 
    ‚Ä¢ D3 fa un "confronto": cosa c'√® nel DOM vs cosa c'√® nei dati 
    ‚Ä¢ Risultato: 10 dati, 0 elementi DOM ‚Üí servono 10 nuovi elementi 
3. .enter()
    ‚Ä¢ Restituisce i "dati in ingresso" (elementi che non esistono ancora) 
    ‚Ä¢ In questo caso: tutti e 10 i data-case 
4. .append("g")
    ‚Ä¢ Per ogni dato, crea un nuovo gruppo <g> 
    ‚Ä¢ Ora abbiamo 10 gruppi SVG 
5. .attr("transform", d => ...)
    ‚Ä¢ Per ogni gruppo, applica una trasformazione 
    ‚Ä¢ d √® il data-case corrente (es. {id: 0, var1: 45, var2: 67, ...}) 
    ‚Ä¢ translate(x, y) sposta il gruppo alle coordinate calcolate 
Esempio concreto:
javascript
// Se d.var1 = 45 e d.var2 = 67 e le scale mappano cos√¨:
xScale(45) ‚Üí 315  // circa met√† schermo
yScale(67) ‚Üí 120  // verso l'alto

// Risultato:
<g transform="translate(315, 120)">
  <!-- Omino disegnato QUI -->
</g>
Importante: Ogni gruppo ha origine in (315, 120), quindi quando disegniamo l'omino con coordinate relative (0, 0), lui appare in (315, 120) sullo schermo!

üë®‚Äçüé® PARTE 8: DISEGNO DEGLI OMINI
javascript
stickmen.each(function(d) {
  const group = d3.select(this);
  createStickman(group);
  
  group.append("text")
    .attr("y", 25)
    .attr("text-anchor", "middle")
    .style("font-size", "10px")
    .style("fill", "#333")
    .text(d.name);
});
Spiegazione:
    1. .each(function(d) { ... }) 
        ‚ó¶ Itera su ogni gruppo (ogni omino) 
        ‚ó¶ this √® l'elemento DOM corrente (il <g>) 
        ‚ó¶ d √® il data-case associato 
    2. const group = d3.select(this) 
        ‚ó¶ Converte l'elemento DOM in un oggetto D3 
        ‚ó¶ Ora possiamo usare i metodi D3 su di esso 
    3. createStickman(group) 
        ‚ó¶ Chiama la funzione che disegna testa, corpo, braccia, gambe 
        ‚ó¶ Tutto viene aggiunto DENTRO questo gruppo 
    4. group.append("text") 
        ‚ó¶ Aggiunge un'etichetta sotto l'omino 
        ‚ó¶ y = 25: 25px SOTTO l'origine dell'omino (sotto i piedi) 
        ‚ó¶ .text(d.name): mostra "Case_1", "Case_2", ecc. 
Struttura finale di un omino:
xml
<g class="stickman-group" transform="translate(315, 120)">
  <circle class="stickman-head" cx="0" cy="-24" r="6" />
  <line class="stickman-body" x1="0" y1="-18" x2="0" y2="4" />
  <line class="stickman-arms" x1="-8" y1="-6" x2="8" y2="-6" />
  <line class="stickman-leg" x1="0" y1="4" x2="-6" y2="14" />
  <line class="stickman-leg" x1="0" y1="4" x2="6" y2="14" />
  <text y="25">Case_1</text>
</g>

üé® PARTE 9: APPLICAZIONE STILI SVG
javascript
svg.selectAll(".stickman-head")
  .attr("fill", "#4A90E2")
  .attr("stroke", "#2E5C8A")
  .attr("stroke-width", 1.5);

svg.selectAll(".stickman-body, .stickman-arms, .stickman-leg")
  .attr("stroke", "#2E5C8A")
  .attr("stroke-width", 2.5)
  .attr("stroke-linecap", "round");
Spiegazione stili:
    1. Testa: 
        ‚ó¶ fill: colore di riempimento (blu) 
        ‚ó¶ stroke: colore del bordo (blu scuro) 
        ‚ó¶ stroke-width: spessore bordo 
    2. Corpo/Braccia/Gambe: 
        ‚ó¶ stroke: colore delle linee 
        ‚ó¶ stroke-width: spessore linee (2.5px) 
        ‚ó¶ stroke-linecap: "round" ‚Üí estremit√† arrotondate (pi√π carino!) 

üñ±Ô∏è PARTE 10: GESTIONE DEL CLICK (LA MAGIA!)
javascript
stickmen.on("click", function(event, d) {
  event.stopPropagation();
  
  d.clickState = (d.clickState + 1) % 3;
Event handler:
    1. .on("click", function(event, d) { ... }) 
        ‚ó¶ Aggiunge un listener per il click 
        ‚ó¶ event: oggetto evento del browser 
        ‚ó¶ d: data-case associato all'omino cliccato 
    2. event.stopPropagation() 
        ‚ó¶ Impedisce che il click si propaghi ad altri elementi 
        ‚ó¶ Serve per evitare interferenze 
    3. d.clickState = (d.clickState + 1) % 3 
        ‚ó¶ Incrementa lo stato del click 
        ‚ó¶ % 3 fa il modulo: 0‚Üí1‚Üí2‚Üí0‚Üí1‚Üí2... 
       Esempio: 
javascript
   // Iniziale: clickState = 0
   (0 + 1) % 3 = 1  // Primo click
   (1 + 1) % 3 = 2  // Secondo click
   (2 + 1) % 3 = 0  // Terzo click (torna a 0!)

javascript
let newX, newY;
let color;

switch(d.clickState) {
  case 0:
    newX = xScale(d.var1);
    newY = yScale(d.var2);
    color = "#4A90E2";  // Blu
    break;
  case 1:
    newX = xScale(d.var3);
    newY = yScale(d.var4);
    color = "#E27D4A";  // Arancione
    break;
  case 2:
    newX = xScale(d.var5);
    newY = yScale(d.var6);
    color = "#4AE27D";  // Verde
    break;
}
Logica degli stati:
A seconda del clickState, usa diverse variabili:
Stato
Variabili
Colore
Significato
0
var1, var2
Blu
Configurazione iniziale
1
var3, var4
Arancione
Prima alternativa
2
var5, var6
Verde
Seconda alternativa
Esempio numerico:
javascript
// Dati: var1=20, var2=80, var3=50, var4=30, var5=70, var6=60

// Stato 0:
newX = xScale(20) = 100
newY = yScale(80) = 50
color = "#4A90E2"

// Stato 1 (dopo primo click):
newX = xScale(50) = 315
newY = yScale(30) = 400
color = "#E27D4A"

// Stato 2 (dopo secondo click):
newX = xScale(70) = 504
newY = yScale(60) = 200
color = "#4AE27D"

üé¨ PARTE 11: ANIMAZIONE DELLA TRANSIZIONE
javascript
d3.select(this)
  .transition()
  .duration(800)
  .ease(d3.easeCubicInOut)
  .attr("transform", `translate(${newX},${newY})`);
```

### **Animazione D3:**

1. **`d3.select(this)`**
   - Seleziona il gruppo dell'omino cliccato

2. **`.transition()`**
   - Crea una transizione animata
   - D3 interpola automaticamente tra valore iniziale e finale

3. **`.duration(800)`**
   - Durata: 800 millisecondi (0.8 secondi)

4. **`.ease(d3.easeCubicInOut)`**
   - Funzione di easing (accelerazione/decelerazione)
   - `easeCubicInOut`: parte piano, accelera, decelera alla fine
   - Rende il movimento pi√π naturale!

5. **`.attr("transform", "translate(newX, newY)")`**
   - Valore finale della transizione
   - D3 calcola automaticamente tutti i frame intermedi

**Come funziona l'interpolazione:**
```
Frame 0ms:   translate(100, 50)   ‚Üê Posizione iniziale
Frame 200ms: translate(153, 137)  ‚Üê D3 calcola automaticamente
Frame 400ms: translate(207, 225)  ‚Üê Valori intermedi
Frame 600ms: translate(261, 312)
Frame 800ms: translate(315, 400)  ‚Üê Posizione finale

javascript
d3.select(this).select(".stickman-head")
  .transition()
  .duration(400)
  .attr("fill", color);
Cambio colore testa:
    ‚Ä¢ Seleziona solo la testa (.stickman-head) 
    ‚Ä¢ Anima il cambio di colore in 400ms (pi√π veloce del movimento) 
    ‚Ä¢ Feedback visivo immediato dello stato 

üåü PARTE 12: HOVER EFFECTS
javascript
stickmen
  .on("mouseenter", function() {
    d3.select(this)
      .transition()
      .duration(200)
      .attr("transform", function(d) {
        const currentTransform = d3.select(this).attr("transform");
        const match = currentTransform.match(/translate\(([-\d.]+),([-\d.]+)\)/);
        if (match) {
          return `translate(${match[1]},${match[2]}) scale(1.2)`;
        }
        return currentTransform;
      });
Effetto hover (mouse sopra):
    1. .on("mouseenter", ...) 
        ‚ó¶ Evento quando il mouse entra sull'omino 
    2. Parsing della trasformazione corrente: 
javascript
   // currentTransform = "translate(315, 120)"
   const match = currentTransform.match(/translate\(([-\d.]+),([-\d.]+)\)/);
   // match[1] = "315"
   // match[2] = "120"
    3. Aggiunge scale: 
javascript
   // Prima: translate(315, 120)
   // Dopo:  translate(315, 120) scale(1.2)
    ‚Ä¢ scale(1.2): ingrandisce del 20% 
    ‚Ä¢ Mantiene la posizione, cambia solo la dimensione 
    4. Anche la testa si ingrandisce: 
javascript
   d3.select(this).select(".stickman-head")
     .transition()
     .duration(200)
     .attr("r", 7.2);  // Da 6 a 7.2 (+20%)

javascript
.on("mouseleave", function() {
  d3.select(this)
    .transition()
    .duration(200)
    .attr("transform", function(d) {
      const currentTransform = d3.select(this).attr("transform");
      const match = currentTransform.match(/translate\(([-\d.]+),([-\d.]+)\)/);
      if (match) {
        return `translate(${match[1]},${match[2]}) scale(1)`;
      }
      return currentTransform;
    });
Mouse esce:
    ‚Ä¢ Rimuove lo scale(1.2) e torna a scale(1) (dimensione normale) 
    ‚Ä¢ Testa torna a raggio 6 
    ‚Ä¢ Tutto animato in 200ms 

üìä PARTE 13: ASSI DI RIFERIMENTO (Opzionale)
javascript
const xAxis = d3.axisBottom(xScale).ticks(5);
const yAxis = d3.axisLeft(yScale).ticks(5);

g.append("g")
  .attr("transform", `translate(0,${innerHeight})`)
  .call(xAxis)
  .style("opacity", 0.3);

g.append("g")
  .call(yAxis)
  .style("opacity", 0.3);
Assi D3:
    1. d3.axisBottom(xScale) 
        ‚ó¶ Crea un asse orizzontale basato su xScale 
        ‚ó¶ .ticks(5): mostra circa 5 tacche 
    2. .attr("transform", "translate(0, 520)") 
        ‚ó¶ Sposta l'asse in BASSO (alla fine dell'area disegno) 
    3. .call(xAxis) 
        ‚ó¶ Chiama la funzione xAxis sul gruppo 
        ‚ó¶ D3 disegna automaticamente le linee e i numeri 
    4. .style("opacity", 0.3) 
        ‚ó¶ Rende gli assi semi-trasparenti (non devono distrarre) 

üé® PARTE 14: COMPONENTE REACT (UI)
javascript
return (
  <div className="w-full h-screen flex flex-col items-center justify-center bg-gray-50 p-4">
    <div className="bg-white rounded-lg shadow-lg p-6">
      <svg ref={svgRef}></svg>
Layout Tailwind:
    ‚Ä¢ w-full h-screen: larghezza 100%, altezza 100% viewport 
    ‚Ä¢ flex flex-col: layout verticale (SVG sopra, legenda sotto) 
    ‚Ä¢ items-center justify-center: centra tutto 
    ‚Ä¢ bg-gray-50: sfondo grigio chiaro 
    ‚Ä¢ bg-white rounded-lg shadow-lg: card bianca con ombra 
SVG ref:
javascript
<svg ref={svgRef}></svg>
    ‚Ä¢ ref={svgRef}: collega questo elemento al useRef 
    ‚Ä¢ Permette a D3 di accedere al DOM tramite svgRef.current 

üè∑Ô∏è PARTE 15: LEGENDA
javascript
<div className="mt-4 p-4 bg-blue-50 rounded border border-blue-200">
  <h3 className="font-bold text-sm mb-2">Legenda Stati:</h3>
  <div className="flex gap-4 text-xs">
    <div className="flex items-center gap-2">
      <div className="w-4 h-4 rounded-full bg-[#4A90E2] border-2 border-[#2E5C8A]"></div>
      <span>Stato 1: Variabili 1-2</span>
    </div>
```

### **Legenda visiva:**
- Mostra i 3 colori possibili degli omini
- Spiega quale stato corrisponde a quale coppia di variabili
- `bg-[#4A90E2]`: sintassi Tailwind per colori custom
- Aiuta l'utente a capire lo stato corrente di ogni omino

---

## üîÑ FLUSSO COMPLETO DI ESECUZIONE

### **1. Montaggio Componente:**
```
React monta il componente
  ‚Üì
useState genera 10 data-cases
  ‚Üì
useEffect si attiva
  ‚Üì
D3 crea SVG, scale, omini
  ‚Üì
Render completato
```

### **2. Interazione Utente:**
```
User clicca omino #3
  ‚Üì
Event handler: d.clickState = 1
  ‚Üì
Calcola newX = xScale(d.var3), newY = yScale(d.var4)
  ‚Üì
D3 anima transizione (800ms)
  ‚Üì
Testa cambia colore (400ms)
  ‚Üì
Animazione completa
**
Questa risposta si √® interrotta perch√© Claude ha raggiunto la lunghezza massima per un messaggio. Premi continua per far proseguire Claude.
Claude pu√≤ commettere errori. 
Verifica sempre le risposte con attenzione.

Universit√†
Sonnet 4.5
